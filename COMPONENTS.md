# Project JAKE

## Purpose
- This is a repo for creating JAKE chatting API
- JAKE(자캐) means a character created by own in Korean.

## Needs
- Want to automatically generate details of character for user’s comfort, and make it fixable
- Adopt “quest” system when chatting with AI
- Establish relationship when having conversation, and make certain relationship only approachable via advancement quest
- Have good memory

## Components

### JAKECreator
Worker for generating character details based on basic information given by users
- Core methods:
    - _design_worldview: generating JAKE’s worldview
        - Input
            - character_basics(dict): basics provided by users such as name, age, occupation
        - Output
            - str_worldview: string explaining worldview of JAKE
    - _design_details: generating details from worldview generated by _design_worldview
        - Input
            - str_worldview(str): worldview string
            - character_basics(dict): basics provided by users such as name, age, occupation
        - Output
            - character details: personality, character, speaking style, likes, dislikes
- Implementation tech stack: FastAPI, LangChain

### JAKEChatter
Agent for running character chats; not only handles dialogue but also generates actions, background, situation descriptions, and affection scores
- Core methods:
    - _chat: returns the outputs required to conduct the chat
        - Input
            - query: user input text
            - prompt_template: prompt used for the conversation
            - character_basics: basic character fields provided by the user in dictionary form
            - character_details: character details generated by JAKECreator
        - Output
            - chat history, affection score, situation description, background
- Implementation tech stack: FastAPI, LangChain

### JAKEChecker
Agent that looks at conversation history and determines whether quests have been cleared in that dialogue
- Core methods:
    - _check_quest: checks whether each quest has been cleared
        - Input
            - history(List[str]): 3 turns of conversation history
            - dict_quest(dict): quest list in the form of a nested Python dictionary (JSON)
        - Output
            - dict_quest: same JSON structure as the input, with quest clear status filled in as binary values
    - _check_advancement_quest: similar to _check_quest, but with different logic focused on relationship and progression
        - Inputs and Outputs similar to _check_quest
- Implementation tech stack: FastAPI, LangChain

### JAKEDynamicProfiler
Worker that generates updated character details, using information accumulated as the conversation progresses, and injects them into the prompt. Looks at the conversation history and, if there are character details that should be added or changed as the chat goes on, it updates them accordingly. </br>
example </br>
Original likes: flowers, chocolate, bookstores </br>
While in conversation, goes to amusement park </br>
likes added: amusement park </br>
- Core methods
    - _dynamic_profile: adds the dynamically generated profile to the existing prompt
        - Input
            - history(str): conversation history (3 turns)
            - dict_quest(dict): quest list in the form of a Python dictionary (JSON)
        - Output
            - dynamic_profile(str)
- Implementation tech stack: FastAPI, LangChain

### JAKESummarizer
Worker that extracts atomic facts from conversations between the character and the user
- Core methods
    - get_memory
        - Input
            - history(List[str]): conversation history (1 turn)
        - Output
            - atomic facts summarizing conversation history
- Implementation tech stack: FastAPI, LangChain
